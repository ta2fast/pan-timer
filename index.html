<body>
    <div class="container">
        <div class="clock-window">げんざい：<span id="live-clock">00:00:00</span></div>
        
        <div class="dq-window msg-window"><div id="msg"></div></div>
        
        <script>
        // ...（中略：既存の変数・playSound・playAlarmなどは変更なし）...

        function typeMessage(text) {
            clearInterval(typeInterval);
            const msgEl = document.getElementById('msg');
            msgEl.textContent = ""; // 枠を一旦空にする
            let i = 0;
            typeInterval = setInterval(() => { 
                if (i < text.length) { 
                    const char = text.charAt(i);
                    msgEl.textContent += char; 
                    if(char !== " " && char !== "\n") playTextSE();
                    i++; 
                } else {
                    clearInterval(typeInterval);
                    // 最後に「▼」を表示して停止
                    msgEl.innerHTML += "<span style='margin-left:5px;'>▼</span>";
                }
            }, 60);
        }

        // ...（中略：load・save・calcなどは変更なし）...

        window.onload = () => { 
            updateClock(); 
            load(); 
            updateTimerDisplay(); 
            
            // ページ読み込み完了のわずか後にメッセージを開始（確実性を高めるため）
            setTimeout(() => {
                typeMessage(getGreeting());
            }, 100);
        };

        // ...（以下略）...
    </script>
</body>
